<% @title = "Manage #{params['context']} messages" -%>

<p>
<% Message::CONTEXTS.each do |context| -%>
	<%= link_to "[#{context}]", :action => :manage, :context => context %>
<% end -%>
</p>

<div class="messages">
<table>
<tbody id="messages">
<% @list.each do |message| -%>
	<tr id="message_<%= message.id %>">
	<td><%= message.key %></td>
	<td nowrap="nowrap"><%= link_to '[..]', :action => :edit, :id => message %></td>
	<td nowrap="nowrap">
	<%= link_to '[-]', {:action => :delete, :id => message}, 
			:confirm => 'Do you really want to delete this message?', 
			:method => :post %>
	</td>
	</tr>
<% end -%>
</tbody>
</table>
</div>

<% if params['context'] -%>
	<br/>
	<%= link_to '[+]', :action => :add, :context => params['context'] %>
<% end -%>

<% @bottom_js += sortable_element 'messages', :url => {:action => :order}, :tag => 'tr' %>
